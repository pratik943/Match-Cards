@font-face {
    font-family: "Creepy";
    src: url("Assets/Fonts/Creepy.woff") format("woff"),
         url("Assets/Fonts/Creepy.woff2") format("woff2");
}

@font-face {
    font-family: "Lunacy";
    src: url("Assets/Fonts/Lunacy.woff") format("woff"),
         url("Assets/Fonts/Lunacy.woff2") format("woff2");
}

* {
  box-sizing: border-box;
}

html {
  min-height: 100vh;
  cursor: url(Assets/Cursors/Ghost.cur), auto;
  font-family: Lunacy;
}

body {
  margin: 0;
  background: radial-gradient(#9D5900, #3D2200);
}

.page-title {
  color: #FF6D00;
  font-family: Creepy, serif;
  font-weight: normal;
  text-align: center;
  font-size: 6em;
}

.game-info-container {
  grid-column: 1 / -1;
  display: flex;
  justify-content: space-between;
}

.game-info {
  color: #FFBB89;
  font-size: 4em;
}

.game-container {
  margin: 50px auto;
  display: grid;
  grid-template-columns: repeat(4, auto);
  grid-gap: 10px;
  justify-content: center;
  perspective: 500px;
}

.card {
  position: relative;
  cursor: url("Assets/Cursors/GhostHover.cur"), auto;
  height: 175px;
  width: 125px;
}

.card-face {
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
  height: 100%;
  border-radius: 12px;
  border-width: 1px;
  border-style: solid;
  overflow: hidden;
  transition: transform 500ms ease-in-out;
  backface-visibility: hidden;
}

.card.visible .card-back { transform: rotateY(-180deg); }
.card.visible .card-front { transform: rotateY(0); }

.card.matched .card-front .card-value {
  animation: dance 1s linear infinite 500ms;
}

.card-back {
  background-color: black;
  border-color: #FF6D00;
  transform: rotateY(0);
}

.cob-web {
  position: absolute;
  transition: width 100ms ease-in-out, height 100ms ease-in-out;
  width: 47px;
  height: 47px;
}

.card-face:hover .cob-web { width: 52px; height: 52px; }

.cob-web-top-left { transform: rotate(270deg); top: 0; left: 0; }
.cob-web-top-right { top: 0; right: 0; }
.cob-web-bottom-left { transform: rotate(180deg); bottom: 0; left: 0; }
.cob-web-bottom-right { transform: rotate(90deg); bottom: 0; right: 0; }

.spider {
  align-self: flex-start;
  transition: transform 100ms ease-in-out;
  transform: translateY(-10px);
}

.card-back:hover .spider { transform: translateY(0); }

.card-value {
  position: relative;
  transition: transform 100ms ease-in-out;
  transform: scale(.9);
}

.card-front:hover .card-value { transform: scale(1); }

.card-front {
  background-color: #FFBB89;
  border-color: #333;
  transform: rotateY(180deg);
}

.overlay-text {
  top: 0; left: 0; right: 0; bottom: 0;
  z-index: 100;
  display: none;
  position: fixed;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  color: #FF6D00;
  font-family: Creepy, serif;
  transition: background-color 500ms, font-size 500ms;
}

.overlay-text-small { font-size: .3em; }

.overlay-text.visible {
  display: flex;
  animation: overlay-grow 500ms forwards;
}

@keyframes dance {
  0%, 100% { transform: rotate(0) }
  25%      { transform: rotate(-30deg) }
  75%      { transform: rotate(30deg) }
}

@keyframes overlay-grow {
  from { background-color: rgba(0, 0, 0, 0); font-size: 0; }
  to   { background-color: rgba(0, 0, 0, .8); font-size: 10em; }
}

@media (max-width: 600px) {
  .game-container { grid-template-columns: repeat(2, auto) }
  .game-info-container { flex-direction: column; align-items: center; }
}

/* ---------------------------
   Farcaster miniapp (Option B)
   Fit 4x4 on one screen, no scroll
---------------------------- */
html.in-miniapp,
body.in-miniapp {
  height: 100svh;
  overflow: hidden;
  overscroll-behavior: none;
  display: flex;
  justify-content: center;
  align-items: flex-start;
}

body.in-miniapp .page-title {
  font-size: clamp(2rem, 7vw, 3rem);
  margin: 8px 0 8px;
}

body.in-miniapp .game-info { font-size: 2.4em; }

body.in-miniapp .game-container {
  /* sizing variables */
  --header-space: 140px;   /* title + counters + margins */
  --gap: 8px;
  --rows: 4;
  --cardRatio: 5/7;        /* original 125x175 -> 5:7 */

  /* available height for the grid */
  --gridH: calc(100svh - var(--header-space));

  /* card height so 4 rows + 3 gaps fit */
  --cardH: calc((var(--gridH) - (var(--rows) - 1) * var(--gap)) / var(--rows));
  --cardW: calc(var(--cardH) * var(--cardRatio));

  display: grid;
  grid-template-columns: repeat(4, var(--cardW));
  grid-auto-rows: var(--cardH);
  grid-gap: var(--gap);
  width: calc(4 * var(--cardW) + 3 * var(--gap));
  margin: 8px auto 12px;
  justify-content: center;
}

/* make cards fill the computed cells */
body.in-miniapp .card {
  width: 100%;
  height: 100%;
}

/* ensure faces stretch with the scaled card */
body.in-miniapp .card-face {
  width: 100%;
  height: 100%;
}

/* slightly smaller overlay animation in miniapp */
@keyframes overlay-grow-mini {
  from { background-color: rgba(0,0,0,0); font-size: 0; }
  to   { background-color: rgba(0,0,0,.8); font-size: 6rem; }
}
body.in-miniapp .overlay-text.visible {
  animation: overlay-grow-mini 400ms forwards;
}
/* ===============================
   Farcaster miniapp: zoom desktop
   - keeps desktop sizes (125x175 cards, 4x4)
   - scales whole board to fit without scroll
   - no HTML changes required
   - requires <html> & <body> to get .in-miniapp (SDK does this)
================================= */
html.in-miniapp,
body.in-miniapp {
  height: 100svh;
  overflow: hidden;
  overscroll-behavior: none;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  background: radial-gradient(#9D5900, #3D2200);
}

/* Slightly tighten title/counters so the grid gets more room */
body.in-miniapp .page-title { font-size: clamp(2.6rem, 8vw, 3.6rem); margin: 10px 0 6px; }
body.in-miniapp .game-info  { font-size: clamp(1.6rem, 6vw, 2.6rem); }

/* === Zoom math (based on your original grid) ===
   Base grid size (no scale): 
     width  = 4*125 + 3*10 = 530px
     height = 4*175 + 3*10 = 730px
   We reserve some headroom for title/counters (header space).
*/
body.in-miniapp {
  --baseW: 530px;
  --baseH: 730px;
  --gap: 10px;
  --headerSpace: 160px; /* adjust if you change title/info sizes */
  --availW: calc(100vw - 24px);                   /* a little side padding */
  --availH: calc(100svh - var(--headerSpace));    /* space left for grid */
  --scaleX: calc(var(--availW) / var(--baseW));
  --scaleY: calc(var(--availH) / var(--baseH));
  --miniapp-scale: min(var(--scaleX), var(--scaleY), 1);
}

/* Keep the grid at its desktop dimensions, then scale it down */
body.in-miniapp .game-container {
  width: var(--baseW);
  height: var(--baseH);
  margin: 8px auto 12px;
  transform-origin: top center;
  transform: scale(var(--miniapp-scale));
  /* optional: crisper rendering on some webviews */
  image-rendering: auto;
  will-change: transform;
}

/* Faces should still fill the card box at any scale */
body.in-miniapp .card,
body.in-miniapp .card-face {
  width: 100%;
  height: 100%;
}